import socks  # SocksiPy module
import socket
import sys

SOCKS_PORT = 9150

# Set socks proxy and wrap the urllib module

socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, '127.0.0.1', SOCKS_PORT)
socket.socket = socks.socksocket

# Perform DNS resolution through the socket

def getaddrinfo(*args):
    return [(socket.AF_INET, socket.SOCK_STREAM, 6, '', (args[0], args[1]))]

socket.getaddrinfo = getaddrinfo

def check_port(h, p):
    s = socks.socksocket()
    s.settimeout(7)
    s.connect((h, p))
    message = b'GET / HTTP/1.0\r\n\r\n'
    s.sendall(message)
    res = s.recv(8192)
    print(res)

check_port(sys.argv[1],int(sys.argv[2]))



